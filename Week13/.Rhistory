knitr::opts_chunk$set(warning=FALSE,message=FALSE)
library(tidyverse)
pump_price <- read_csv("pump_price_for_gasoline_us_per_liter.csv",col_types = cols(`1993` = col_double(),
`1994` = col_double(),
`1996` = col_double(),
`1997` = col_double(),
`1999` = col_double(),
`2001` = col_double(),
`2003` = col_double(),
`2005` = col_double(),
`2007` = col_double(),
`2009` = col_double(),
`2011` = col_double(),
`2013` = col_double(),
`2015` = col_double()))
co2_emissions <- read_csv("co2_emissions_tonnes_per_person.csv")
co2_emissions <- co2_emissions %>%
gather(`1800`:`2014`,key='year',value='CO2 Emissions (Tonnes/person)')
pump_price <- pump_price %>%
gather(`1991`:`2016`,key = 'year',value = 'Pump Price ($/L)')
co2_and_pump <- co2_emissions %>%
inner_join(pump_price, by = c('country','year')) %>%
filter(!is.na(`Pump Price ($/L)`) & !is.na(`CO2 Emissions (Tonnes/person)`))
#The code for the map function you used and a brief description of what the code is doing
(act_cor <- co2_and_pump %>%
#  group_by(country) %>%
#  filter(country=='United States') %>%
nest() %>%
mutate(cor = map(data, ~cor(.x$`CO2 Emissions (Tonnes/person)`, .x$`Pump Price ($/L)`))) %>%
unnest(cor, .drop = TRUE) %>%
arrange(desc(cor)))
perm_test_cor <- numeric(1000)
for(i in seq_along(perm_test_cor)){
s <- sample(co2_and_pump$`CO2 Emissions (Tonnes/person)`)
perm_test_cor[i] <- cor(co2_and_pump$`Pump Price ($/L)`,s)
}
ggplot(tibble(perm_test_cor),aes(perm_test_cor))+geom_histogram(bins = 50)+
geom_vline(xintercept = act_cor$cor, color='red')
sum(act_cor$cor > perm_test_cor)/length(perm_test_cor)
#The code for the map function you used and a brief description of what the code is doing
#The code for the map function you used and a brief description of what the code is doing
View(gapminder)
sex_ratio <- read.csv("sex_ratio_15_49_years.csv")
suicides_100k <- read.csv("suicide_per_100000_people.csv")
View(suicides_100k)
suicides_100k <- read_csv("suicide_per_100000_people.csv")
sex_ratio <- read_csv("sex_ratio_15_49_years.csv")
View(suicides_100k)
suicides_100k <- read_csv("suicide_per_100000_people.csv") %>% filter(!is.na())
suicides_100k <- read_csv("suicide_per_100000_people.csv")
sex_ratio <- read_csv("sex_ratio_15_49_years.csv")
suicides_100k <- suicides_100k[complete.cases(),]
View(co2_emissions)
suicides_100k <- suicides_100k %>%
gather(`1950`:`1998`,key='year',value='Suicides (per 100k people)')
View(suicides_100k)
suicides_100k <- suicides_100k %>%
gather(1950:1998,key='year',value='Suicides (per 100k people)')
co2_emissions <- co2_emissions %>%
gather(`1800`:`2014`,key='year',value='CO2 Emissions (Tonnes/person)')
knitr::opts_chunk$set(warning=FALSE,message=FALSE)
library(tidyverse)
pump_price <- read_csv("pump_price_for_gasoline_us_per_liter.csv",col_types = cols(`1993` = col_double(),
`1994` = col_double(),
`1996` = col_double(),
`1997` = col_double(),
`1999` = col_double(),
`2001` = col_double(),
`2003` = col_double(),
`2005` = col_double(),
`2007` = col_double(),
`2009` = col_double(),
`2011` = col_double(),
`2013` = col_double(),
`2015` = col_double()))
co2_emissions <- read_csv("co2_emissions_tonnes_per_person.csv")
co2_emissions <- co2_emissions %>%
gather(`1800`:`2014`,key='year',value='CO2 Emissions (Tonnes/person)')
pump_price <- pump_price %>%
gather(`1991`:`2016`,key = 'year',value = 'Pump Price ($/L)')
co2_and_pump <- co2_emissions %>%
inner_join(pump_price, by = c('country','year')) %>%
filter(!is.na(`Pump Price ($/L)`) & !is.na(`CO2 Emissions (Tonnes/person)`))
View(pump_price)

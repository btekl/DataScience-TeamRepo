---
title: 'Lab 7: Exploratory Data Analysis'
author: "Brian Teklits, Charles Doremieux, Andrew MacLean, Clint LaBattaglia"
date: "10/13/2019"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(lubridate)

# Handle type conversions
hpc <- read_delim("household_power_consumption.txt",na = c('','?'),
                  delim=";",
  col_types = cols(
  Date = col_date("%d/%m/%Y"),
  Time = col_time("%H:%M:%S"),
  Global_active_power = col_double(),
  Global_reactive_power = col_double(),
  Global_intensity = col_double(),
  Sub_metering_1 = col_double(),
  Sub_metering_2 = col_double(),
  Sub_metering_3 = col_double()
))
```
### Data Description and Handling Missing Values

The dataset describes various electrical quantities taken from a house in France over a period of 4 years. We have information relating to current, voltage, wattage, and readings based on which rooms of the house are consuming power.

To get an idea of the missing values, we first looked at some summaries:
```{r}
hpc %>%
  filter(is.na(Voltage)) %>%
  group_by(Date) %>%
  count() %>%
  arrange(desc(n))
```
Multiple days have 1440 missing values, which corresponds to an entire day without power. We chose to drop these days from the data as they provide no information whatsoever.
```{r}
off_all_day <- hpc %>%
  filter(is.na(Voltage)) %>%
  group_by(Date) %>%
  count() %>% 
  filter(n == 1440)

hpc2 <- hpc %>%
  anti_join(off_all_day, by = "Date")
```
Then, we looked at the remaining missing values:
```{r}
outages <- hpc2 %>%
  filter(is.na(Voltage)) %>%
  group_by(Date) %>%
  count() %>%
  arrange(desc(n))
outages
```
We split these into two groups: those with more than 6 minutes of lost data in a day, and those under that threshold. We guessed that the shorter gaps in data might represent measurement malfunctions or errors, which could be filled in from the previous minute's measurements without substantially changing the data. Longer delays could indicate power outages: these could be dropped if desired.

We decided to handle these cases individually based on the questions we looked to answer. 
```{r}
# Use these to plot times on a smaller dataset, takes forever to run on the entire dataset

#hpc2 <- hpc2 %>% mutate(year=substr(Date,1,4), month=substr(Date, 6,7), day=substr(Date, 9,10))

#hpc2 <- hpc2 %>% mutate(hour=substr(Time,1,2), minute=substr(Time, 4,5), second=substr(Time, 7,8))

#hpc2 <- hpc2 %>% mutate( day=as.integer(day),
#                         month=as.integer(month),
 #                        year=as.integer(year),
  #                       hour=as.integer(hour),
   #                      minute=as.integer(minute),
    #                       second=as.integer(second))

#hpc2 <- hpc2 %>% mutate(datetime=make_datetime(year, month, day, hour, minute, second))
```


### Individual Section

#### Name

**Question:** state question, state how it was addressed. 
```{r}
# Include Plot and Summary Statistic
```
**Why the Question is interesting:**

**How did you formulate the question:** Describe Exploratory Data Analysis techniques used

**Benefit/harm of this analysis:** One sentence

#### Name

**Question:** state question, state how it was addressed. 
```{r}
# Include Plot and Summary Statistic
```
**Why the Question is interesting:**

**How did you formulate the question:** Describe Exploratory Data Analysis techniques used

**Benefit/harm of this analysis:** One sentence

#### Name

**Question:** state question, state how it was addressed. 
```{r}
# Include Plot and Summary Statistic
```
**Why the Question is interesting:**

**How did you formulate the question:** Describe Exploratory Data Analysis techniques used

**Benefit/harm of this analysis:** One sentence

#### Name

**Question:** state question, state how it was addressed. 
```{r}
# Include Plot and Summary Statistic
```
**Why the Question is interesting:**

**How did you formulate the question:** Describe Exploratory Data Analysis techniques used

**Benefit/harm of this analysis:** One sentence
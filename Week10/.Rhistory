library(tidyverse)
library(stringr)
library(lubridate)
knitr::opts_chunk$set(warning=FALSE,message=FALSE)
Que <- read_csv("Questions_trunc.csv")
Ans <- read_csv("Answers_trunc.csv")
Ans <- Ans %>%
mutate(ans_time = ymd_hms(CreationDate))
Que <- Que %>%
mutate(ask_time = ymd_hms(CreationDate))
Q_and_A <- Que %>%
left_join(Ans, by = c("Id" = "ParentId"))
Q_and_A <- Q_and_A %>%
select(-CreationDate.x,-CreationDate.y,-X7.x,-X7.y)
Q_and_A <- Q_and_A %>%
rename(Score_Que = Score.x, AnswerId = Id.y, Id_Asked = OwnerUserId.x, ID_Answered = OwnerUserId.y, QuestionBody = Body.x, AnswerBody = Body.y, Score_Ans = Score.y)
Q_and_A2 <- Q_and_A %>%
group_by(Id) %>%
mutate(Timeliness = min_rank(desc(ask_time-ans_time)))
Ans_per_Timeli <- Q_and_A2 %>%
group_by(Timeliness) %>%
count()
Score_per_Timeli <- Q_and_A2 %>%
group_by(Timeliness) %>%
summarize(timeScore = sum(Score_Ans))
(Score_per_Ans <- Ans_per_Timeli %>%
left_join(Score_per_Timeli,by="Timeliness")%>%
group_by(Timeliness) %>%
summarize(Score_per_Ans = timeScore/n))
# 6 Answers came before question
t <- Q_and_A2 %>%
filter(ans_time <= ask_time)
test <- Q_and_A2 %>%
mutate(Inc_Code = str_detect(AnswerBody,"<code>"))
p1 <- test %>%
group_by(Inc_Code)%>%
summarize(total = sum(Score_Ans))
p2 <- test %>%
group_by(Inc_Code) %>%
count()
p3 <- p1 %>%
left_join(p2) %>%
group_by(Inc_Code) %>%
summarize(tot_per = total/n)
t2 <- Q_and_A2 %>%
mutate(need = str_count(QuestionBody,regex("need",ignore_case = TRUE)))
c1 <- t2 %>%
group_by(need) %>%
count()
c2 <- t2 %>%
group_by(need) %>%
summarize(tot = sum(Score_Que)) %>%
group_by(need) %>%
left_join(c1) %>%
summarize(tot_per = tot/n)
ggplot(c2,aes(need,tot_per))+
geom_point()+
geom_smooth(method='lm')
View(flights)
library(tidyverse)
library(nycflights13)
View(flights)
View(weather)
f <- fligths %>%
select(day,month,year,dest)
f <- flights %>%
select(day,month,year,dest)
f
View(weather)
f <- flights %>%
select(day,month,dest)
f <- flights %>%
filter(!is.na(arr_delay))
f
select(day,month,dest)
f
library(tidyverse)
library(nycflights13)
View(flights)
View(weather)
f <- flights %>%
filter(!is.na(arr))
f <- flights %>%
filter(!is.na(arr_delay))
f
f <- flights %>%
filter(!is.na(arr_delay)) %>%
select(day,month,dest)
f
f <- flights %>%
filter(!is.na(arr_delay)) %>%
select(day,month,dest)
f
f <- flights %>%
filter(!is.na(arr_delay)) %>%
select(day,month,hour)
f
library(tidyverse)
library(nycflights13)
View(flights)
View(weather)
f <- flights %>%
filter(!is.na(arr_delay))
pie <- inner_join(f,planes, by = 'tailnum')
pie
